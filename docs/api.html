<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Navi | API</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
  </head>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300..700&family=Orbitron:wght@400..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="./javascript/highlight/styles/dark.css">
  <link rel="stylesheet" href="./css/index.css">
  <script type="text/javascript" src="./javascript/typewriter/core.js"></script>
  <script type="text/javascript" src="./javascript/jscolor/jscolor.min.js"></script>
  <body>
    <nav id="topnav">
      <a class="nav-link" id="navi-text" href="javascript:colorPick()">Navi</a>
      <a class="nav-link" href="index.html">Home</a>
      <a class="nav-link" href="./docs.html">Docs</a>
      <a id="logo" class="nav-link" href="./api.html">API</a>
      <a class="nav-link" href="./features.html">Features</a>
      <a class="nav-link" target="_blank" href="https://github.com/dheerajshenoy/navi">Github <i class="fa fa-link"></i></a>
      <a id="about" class="nav-link" href="javascript:void(0);" onclick="openNavMenu()"><i class="fa fa-bars"></i></a>
    </nav>
      <input id="colorPicker" data-jscolor="{onInput:'colorUpdate(this)'}" value="var(--accent)">
    <br>
    <div id="mainbox">

      <h1>API</h1><br>

      <span style="font-size: 20px;">
        Welcome to the Lua API for our file manager, a powerful and flexible interface designed to give users complete control over customizing and automating their file management workflows.
      </span>

    </div>

    <div class="content">

      <h2 class="heading">Navi API</h2>
      <hr class="hr">
        The Lua API for Navi provides a versatile and user-friendly scripting interface, empowering users to tailor the application to their specific needs. With this API, you can create custom commands, define behaviors, and automate repetitive tasks, enhancing productivity and efficiency. Whether you want to modify the file manager's appearance, customize column layouts, or implement advanced file operations, the Lua API makes it all accessible with straightforward scripting. Designed with both beginners and advanced users in mind, the API opens up endless possibilities to adapt the file manager to your workflow, making it a truly personalized tool.

      <br><br>

      <div class="note">
        <h3>NOTE</h3>
        This documentation assumes that you know what the Lua programming language is and it's basics. It is important to know this before you can start configuring and extending Navi's behaviour. However, if you do not know what any of this means, you can check out the following materials:<br><br>

        <ul class="list">
          <li><a href="https://www.lua.org/start.html">Lua Official Website | Get Started</a></li>
          <li><a href="https://tylerneylon.com/a/learn-lua/">Learn Lua in 15 Minutes | Tyler Neylon</a></li>
          <li><a href="https://dev.to/jd2r/the-lua-tutorial-544b">The Lua Tutorial | dev.to</a></li>
        </ul>

      </div>

      <h2 class="heading">Where to define the APIs </h2>
      Navi uses <span class="block">config.lua</span> file in the navi configuration directory which is <span class="block">~/.config/navi/</span> to read all the configuration options and custom functions.
      <br><br>

      <h2 class="heading">Entry Point</h2>
      <hr class="hr">
        The main entry point for Navi Lua API is the function <span class="block">INIT_NAVI</span>.
      The function INIT_NAVI will be called during the startup time of Navi. This function can be used to add hooks, definee and call other functions etc.

      <pre><code class="language-lua">function INIT_NAVI()
    navi.io.msg("Navi just booted") -- this just prints this statment on boot
-- add other stuff here
end</code></pre>

      <div class="note">
        <h3>NOTE</h3>
        When defining your own custom functions, you have the liberty to name the function whatever you want. But, please be mindful of functions like <span class="block">INIT_NAVI</span> when naming your functions and make sure that there are no overlapping of custom function names and important function names.
      </div>

      <h2 class="heading">Custom functions</h2>
      <hr class="hr">

        You can write custom functions in lua with arguments. Navi passes the current file name and directory name to each of these functions when they are called. You can then proceed to process the file from within lua using Navi.

      <pre><code class="language-lua">function someFunction(fileName, dirName)
    navi.io.msg("WOW! Navi is currently on the file " .. fileName .. " and inside the " .. dirName .. " directory!")
end</code></pre>

      You can then call this function within Navi by calling the lua <span class="block"><function_name></span> command or by just calling <span class="block">lua</span> command and then typing in the function name in the inputbar. Doing this will execute the function. The function in the example above when executed will display:<br><br>

        "WOW! Navi is currently on the file <span class="block"> fileName </span> and inside the <span class="block">dirName</span> directory!"<br><br>

      <h2 class="heading">Hooks</h2>
      <hr class="hr">

        Hooks are signals that are emitted when navi does a certain action which you can "subscribe" to to create a custom action associated with that signal. Hooks are emitted for actions like selecting an item, changing directory etc.<br><br>

        You can add hook using the function <span class="block">navi.hook.add</span>. It takes two arguments, both of which are required. The first one is a <span class="block">hook_name</span> which is a valid hook name (see hook names below). Second argument is a <span class="block">function</span> that will be executed in response to the hook.<br><br>

      <div class="note">
        <h3>NOTE</h3>
        You can define more than one hook functions. But keep in mind that, after emitting the hook, Navi executes each of these functions (if there are multiple), so it's best to add functions that are efficient.
      </div>

      <h2 class="heading">Hook Names</h2>
      <hr class="hr">

        Currently the following hooks exist in navi:<br><br>

<ul class="list">
    <li>Select Item <span class="block">item_select</span></li><br>
    <li>Item Changed <span class="block">item_changed</span></li><br>
    <li>Up Directory <span class="block">directory_up</span></li><br>
    <li>Directory Loaded <span class="block">directory_loaded</span></li><br>
    <li>Directory Changed <span class="block">directory_changed</span></li><br>
    <li>Drive Mounted <span class="block">drive_mounted</span></li><br>
    <li>Drive Unmounted <span class="block">drive_unmounted</span></li><br>
    <li>Visual Line mode <span class="block">visual_line_mode_on</span> & <span class="block">visual_line_mode_off</span></li><br>
    <li>Filter mode <span class="block">filter_mode_on</span> & <span class="block">filter_mode_off</span></li><br>
</ul>

      Example:

<pre><code class="language-lua">function INIT_NAVI()
    navi.hook.add("item_select", function ()
        navi.io.msg("You selected an item...YAY!")
    end)
end</code></pre>

      Output: Whenever you select an item in Navi, this function will be called, which in turn prints the message You selected an item...YAY!<br><br>


      <h2 class="heading">Navi API</h2>
      <hr class="hr">

        This is the main <a href="https://www.tutorialspoint.com/lua/lua_tables.htm">table</a>. In this table are four more tables: <span class="block">ui</span>, <span class="block">api</span>, <span class="block">io</span> and <span class="block">shell</span>.<br><br>

      <h3 class="heading">UI</h3>
      <ul class="list">
        <li><span class="block">marks</span></li>
        <br>
        <ul class="list2">
          <li>toggle</li>
          <br>
            Toggles the marks pane
          <div class="simple-block">
            <span class="key">Return type</span>
            <span class="value">void</span>
          </div>

          <div class="simple-block">
            <span class="key">Argument(s)</span>
            <span class="value">None</span>
          </div>
        </ul>
        <br>
        <li><span class="block">shortcuts</span></li>
        <br>
        <ul class="list2">
          <li>toggle</li>
          <br>
            Toggles the marks pane
          <div class="simple-block">
            <span class="key">Return type</span>
            <span class="value">void</span>
          </div>
          <div class="simple-block">
            <span class="key">Argument(s)</span>
            <span class="value">None</span>
          </div>
        </ul>
        <br>
        <li><span class="block">messages</span></li>
        <br>
        <ul class="list2">
          <li>toggle</li>
          <br>
            Toggles the marks pane
          <div class="simple-block">
            <span class="key">Return type</span>
            <span class="value">void</span>
          </div>
          <div class="simple-block">
            <span class="key">Argument(s)</span>
            <span class="value">None</span>
          </div>
        </ul>
        <br>
        <li><span class="block">preview_panel</span></li>
        <br>
        <ul class="list2">
          <li>toggle</li>
          <br>
            Toggles the marks pane
          <div class="simple-block">
            <span class="key">Return type</span>
            <span class="value">void</span>
          </div>
          <div class="simple-block">
            <span class="key">Argument(s)</span>
            <span class="value">None</span>
          </div>
        </ul>
        <br>
        <li><span class="block">pathbar</span></li>
        <br>
        <ul class="list2">
          <li>toggle</li>
          <br>
            Toggles the marks pane
          <div class="simple-block">
            <span class="key">Return type</span>
            <span class="value">void</span>
          </div>
          <div class="simple-block">
            <span class="key">Argument(s)</span>
            <span class="value">None</span>
          </div>
        </ul>
        <br>
        <li><span class="block">statusbar</span></li>
        <br>
        <ul class="list2">
          <li>toggle</li>
          <br>
            Toggles the marks pane
          <div class="simple-block">
            <span class="key">Return type</span>
            <span class="value"><span class="block">void</span></span>
          </div>
          <div class="simple-block">
            <span class="key">Argument(s)</span>
            <span class="value"><span class="block">None</span></span>
          </div>
        </ul>
        <br>
        <li><span class="block">menubar</span></li>
        <br>
        <ul class="list2">
          <li>toggle ( )</li>
          <br>
            Toggles the marks pane
          <div class="simple-block">
            <span class="key">Return type</span>
            <span class="value"><span class="block">void</span></span>
          </div>
          <div class="simple-block">
            <span class="key">Argument(s)</span>
            <span class="value"><span class="block">None</span></span>
          </div>
          <br>
          <li>toggle (value) </li>
          <br>
            Toggles the marks pane with the value passed as argument
          <div class="simple-block">
            <span class="key">Return type</span>
            <span class="value"><span class="block">void</span></span>
          </div>
          <div class="simple-block">
            <span class="key">Argument(s)</span>
            <span class="value">1 ; <span class="block">bool</span></span>
          </div>
          <br>

          <li>add_menu (item) </li>
          <br>
            Adds the menu provided as argument to the menubar. The argument <span class="block">MenuItem</span> should have the following structure:
          <code class="language-lua"><pre>MenuItem {
    label = "menu label",
    submenu = {
        label = "submenu",
        action = function ()
    }
}</code></pre>

          <div class="simple-block">
            <span class="key">Return type</span>
            <span class="value"><span class="block">void</span></span>
          </div>
          <div class="simple-block">
            <span class="key">Argument(s)</span>
            <span class="value">1 ; type: <span class="block">MenuItem</span></span>
          </div>

            <h3>Example</h3>
            <pre><code class="language-lua">function INIT_NAVI()
    -- This is a function with special meaning to Navi.
    -- This will be called on startup

    custom_menu = {
        label = "Custom Menu",
        submenu = {
            {
                label = "Open",
                action = function()
                    navi.io.msg("HELLO WORLD");
                end,
            },

            {
                label = "sub",
                submenu = {
                    {
                        label = "item 1",
                        action = function ()
                            navi.io.msg("SUB HELLO");
                        end
                    }
                },
            },

            {
                label = "Save",
                action = function() print("Save clicked") end,
            }
        }
    }

    navi.ui.menubar.add_menu(custom_menu)

end</code></pre>

        </ul>
      </ul>

    </div>

    <div class="footer">
      <div class="col-1">
        <ul>
          <h3>Resources</h3>
          <a href="./docs.html">Docs</a>
          <a href="./features.html">Features</a>
          <a href="./installation.html">Installation</a>
          <a href="./api.html">API</a>
        </ul>
      </div>

      <div class="col-2">
        <ul>
          <h3>Easter</h3>
          <a href="javascript:resetAccentColor()">Reset accent color</a>
        </ul>
      </div>

      <div class="col-3">
        <a target="_blank" href="https://github.com/dheerajshenoy/navi">Github</a>
      </div>
    </div>
    <span class="copyright_text"><center>Copyright (c) 2024 Navi.</center></span>
    <script type="text/javascript" src="./javascript/index.js"></script>
    <script type="text/javascript" src="./javascript/highlight/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
  </body>
</html>
